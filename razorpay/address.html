<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Address</title>
    <link rel="stylesheet" href="../style.css">
  </head>
  <body>
    <section
        id="address-div"
        class="mx-2 px-4 py-5 border border-gray-100 bg-gray-100 hover:border-gray-400 transition-all duration-500 ease-in-out rounded-xl w-full md:w-[45%] my-3 shadow-lg"
      >
        <h3
          id="address-title"
          class="text-lg text-center font-bold text-gray-700 mb-2"
        >
          Enter your address
        </h3>
        <form
          method="POST"
          enctype="multipart/form-data"
          class="space-y-4"
          id="address-form"
        >
          <div class="grid gap-2 sm:grid-cols-2">
            <div class="sm:col-span-2">
              <label
                for="name"
                class="block text-gray-700 text-sm font-medium"
              >
                Your name
                <input
                  name="name"
                  type="text"
                  id="name"
                  class="mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                  placeholder="Joe Bloggs"
                  required
                />
              </label>
            </div>

            <div class="sm:col-span-2">
              <label
                for="address"
                class="block text-gray-700 text-sm font-medium"
              >
                Address
                <input
                  name="address"
                  type="text"
                  id="address"
                  required
                  class="mt-1 p-2 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                />
              </label>
            </div>

            <div>
              <label
                for="city"
                class="block text-gray-700 text-sm font-medium"
              >
                City
                <input
                  name="city"
                  type="text"
                  id="city"
                  required
                  class="mt-1 p-2 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                />
              </label>
            </div>

            <div>
              <label
                for="state"
                class="block text-gray-700 text-sm font-medium"
              >
                State/Province
                <input
                  name="state"
                  type="text"
                  id="state"
                  required
                  class="mt-1 p-2 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                />
              </label>
            </div>

            <div>
              <label
                for="zip_postal"
                class="block text-gray-700 text-sm font-medium"
              >
                Zip/Postal code
                <input
                  name="zip"
                  type="text"
                  id="zip_postal"
                  required
                  class="mt-1 p-2 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                />
              </label>
            </div>

            <div>
              <label
                for="country"
                class="block text-gray-700 text-sm font-medium"
              >
                Country
                <input
                  name="country"
                  type="text"
                  id="country"
                  required
                  class="mt-1 p-2 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                />
              </label>
            </div>

            <div class="sm:col-span-2">
              <label
                for="mobile"
                class="block text-gray-700 text-sm font-medium"
              >
                Mobile
                <input
                  name="telephone"
                  type="text"
                  id="mobile"
                  required
                  class="mt-1 p-2 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                />
              </label>
            </div>

            <div class="sm:col-span-2">
              <label
                for="delivery-info"
                class="block text-gray-700 text-sm font-medium"
              >
                Delivery information
                <textarea
                  name="message"
                  id="delivery-info"
                  class="mt-1 p-2 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-400 focus:ring focus:ring-indigo-300 focus:ring-opacity-50 transition duration-150 ease-in-out"
                  rows="2"
                  placeholder="floor/door lock code/etc."
                ></textarea>
              </label>
            </div>

            <div class="sm:col-span-2">
              <div class="checkbox-container">
                <label for="setDefault" class="checkbox-label block text-gray-700 text-sm font-medium">
                  Set as default address?
                </label>
                <input
                  name="setDefault"
                  id="setDefault"
                  type="checkbox"
                  class="mx-2 p-2 focus:ring-indigo-400 focus:ring-opacity-50 transition duration-150 ease-in-out"
                />
              </div>
          </div>

          <div class="sm:col-span-2">
            <div class="checkbox-container">
              <label for="saveAddress" class="checkbox-label block text-gray-700 text-sm font-medium">
                Do you want to save this address?
              </label>
              <input
                name="saveAddress"
                id="saveAddress"
                type="checkbox"
                class="mx-2 p-2 focus:ring-indigo-400 focus:ring-opacity-50 transition duration-150 ease-in-out"
              />
            </div>
        </div>

          <div class="sm:col-span-2">
            <button
              type="submit"
              id="submit"
              class="w-full h-10 px-5 text-indigo-100 bg-indigo-600 rounded-lg transition-colors duration-150 focus:shadow-outline hover:bg-indigo-700"
            >
              Save
            </button>
          </div>
        </form>
        <div id="full-address"></div>
      </section>

      <div
      class="p-4 border border-gray-200 rounded-xl w-full group transition-all duration-500 hover:border-gray-400"
    >
      <h2
        class="font-manrope font-bold text-lg text-black pb-1 border-b border-gray-200"
      >
        Order Summary
      </h2>
      ${filteredProducts
        .map(
          (product) =>
            `
        <div class="py-2 border-b border-gray-200">
          <div class="flex items-center justify-between mb-2">
          <p class="font-normal text-base text-gray-400 transition-all duration-500 group-hover:text-gray-700 text-nowrap overflow-hidden text-ellipsis w-[50%]">
              ${product.title}
          </p>
          <p class="font-medium text-base text-gray-900"> <span class="text-xs text-gray-400 font-semibold">X</span>${
            product.count
          }
          <p class="font-medium text-base text-gray-900">&#8377;${Math.round(
            product?.price * 80 + product?.price * 80 * 0.01
          ).toFixed(2)} </p>
        </div>
        `
        )
        .join("")}
        <div class="flex items-center justify-between gap-4 mb-5">
          <p
            class="font-normal text-base text-gray-400 transition-all duration-500 group-hover:text-gray-700"
          >
            Shipping
          </p>
          <p class="font-medium text-base text-gray-600">${
            totalPrice >= 300 ? "Free" : `&#8377; 51`
          }</p>
        </div>
        <div class="flex items-center justify-between gap-4">
          <p
            class="font-normal text-base text-gray-400 transition-all duration-500 group-hover:text-gray-700"
          >
            Coupon Code
          </p>
          <p class="font-medium text-base text-emerald-500">#APPLIED 10% OFF</p>
        </div>
      </div>
      <div class="total flex items-center justify-between pt-1">
        <p class="font-normal text-lg text-black">Subtotal</p>
        <h5 class="font-manrope font-bold text-base text-indigo-600">
         &#8377;${
           totalPrice >= 300
             ? `${totalPrice}`
             : `${totalPrice === 0 ? "0" : `${totalPrice + 51}`}`
         }
        </h5>
      </div>
       <div class="mt-4" onclick="proceedToPay(event,${totalPrice})">
<button
class="w-full py-3 bg-indigo-600 text-white font-manrope font-bold text-lg rounded-lg transition-all duration-500 hover:bg-indigo-700"
>
Proceed To Pay
</button>
</div>
<div class="mt-6 p-4 border border-gray-200 rounded-xl w-full transition-all duration-500">
<h2 class="font-manrope font-bold text-lg text-black pb-1 border-b border-gray-200">Shipping Details</h2>
<div id="address-display" class="hidden">
<p id="address-text" class="p-2 border border-gray-300 rounded-md mt-2"></p>
<div class="flex justify-end mt-2">
  <button id="edit-address" class="py-2 px-4 bg-yellow-500 text-white font-bold rounded-lg transition-all duration-500 hover:bg-yellow-600">Edit</button>
  <button id="change-address" class="ml-2 py-2 px-4 bg-red-600 text-white font-bold rounded-lg transition-all duration-500 hover:bg-red-700">Change</button>
</div>
</div>
<textarea id="address" class="w-full p-2 border border-gray-300 rounded-md mt-2 hidden" rows="4" placeholder="Enter your shipping address"></textarea>
<div id="save-cancel-buttons" class="flex justify-end mt-2 hidden">
<button id="cancel" class="py-2 px-4 bg-gray-500 text-white font-bold rounded-lg transition-all duration-500 hover:bg-gray-600">Cancel</button>
<button id="save-address" class="ml-2 py-2 px-4 bg-green-600 text-white font-bold rounded-lg transition-all duration-500 hover:bg-green-700">Save</button>
</div>
    </div>
  </body>
</html>
